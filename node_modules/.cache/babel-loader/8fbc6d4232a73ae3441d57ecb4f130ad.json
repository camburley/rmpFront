{"ast":null,"code":"var _jsxFileName = \"/Users/cam/real_money_polls/src/components/LiveMarkets/LiveMarkets.js\";\n\n/* \n\n <LiveContracts \n        avatar={require('../../images/BidenAvatar.png')}\n        contractName=\"Joe Biden\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.14\"\n        priceChange=\"0.2\" \n        />\n         <LiveContracts \n        avatar={require('../../images/BernieAvatar.png')}\n        contractName=\"Bernie Sanders\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.06\"\n        priceChange=\"0.3\" \n        />\n         <LiveContracts \n        avatar={require('../../images/ButtigeigAvatar.png')}\n        contractName=\"Pete Buttigeig\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.05\"\n        priceChange=\"0.1\" \n        />\n         <LiveContracts \n        avatar={require('../../images/WarrenAvatar.png')}\n        contractName=\"Elizabeth Warren\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.03\"\n        priceChange=\"0.1\" \n        />\n\n\n\n\n*/\nimport React from 'react';\nimport './LiveMarkets.scss';\nimport SlideToggle from 'react-slide-toggle';\nimport LiveContracts from '../LiveContracts/LiveContracts';\nimport MarketBlurb from '../MarketBlurb/MarketBlurb';\nimport axios from 'axios';\n\nclass LiveMarkets extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleActive = () => {\n      this.setState({\n        active: !this.state.active\n      });\n    };\n\n    this.state = {\n      active: false,\n      contracts: [],\n      contractNames: [],\n      mId1: '2721',\n      contractIds: [],\n      contractPrices: [],\n      activeArray: [],\n      cPrice: \"\",\n      pChange: \"\",\n      cName: \"\",\n      cAvatar: \"\",\n      cData: []\n    };\n  }\n\n  async componentDidMount() {\n    //Get contracts\n    axios.get('http://localhost:3002/api/contract/contract_list/' + this.props.mId1Title).then(res => {\n      this.setState({\n        contracts: res.data[0]\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    console.log('this.state.contracts', this.state.contracts);\n    const contracts = this.state.contracts;\n    contracts.map((contract, index) => {\n      this.state.contractIds.push(contract.contract_id);\n      const contractIds = this.state.contractIds;\n      this.state.contractNames.push(contract.name);\n      const contractNames = this.state.contractNames;\n    });\n  }\n\n  async createContracts() {\n    this.state.contracts.map((contract, index) => {\n      //console.log('this the index', index)\n      return React.createElement(LiveContracts, {\n        key: index,\n        contractName: contract.name,\n        contractAvatar: contract.image,\n        namesPrices: this.namesPrices,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451\n        },\n        __self: this\n      });\n    });\n  }\n\n  async contractDataCall() {\n    await axios.get('http://localhost:3002/api/value/value_list/' + this.state.contractIds).then(res => {\n      // Put contract values into array in state\n      this.setState({\n        contractPrices: res.data[0]\n      }); // make some variables to easily move data around\n\n      const values = this.state.contractPrices;\n      const lastTrade = values.last_trade_price;\n      const lastClose = values.last_close_price;\n      const priceDiff = (lastClose - lastTrade).toFixed(2); // save prices in state\n\n      const cPrice = lastTrade;\n      this.setState({\n        cPrice: cPrice\n      });\n      const pChange = priceDiff;\n      this.setState({\n        pChange: pChange\n      });\n      console.log('this.state.cPrice', this.state.cPrice);\n      console.log('this.state.pChange', this.state.pChange);\n      console.log('this.state.contractPrices', this.state.contractPrices);\n      this.createContracts();\n    }); // end of prices call\n  }\n\n  render() {\n    const activeContracts = [{\n      avatar: require(\"../../images/KamalaAvatar.png\"),\n      contractName: \"Kamala Harris\",\n      contractLabel: \"Latest Price\",\n      contractPrice: \"0.84\",\n      priceChange: \"0.02\"\n    }, {\n      avatar: require(\"../../images/BidenAvatar.png\"),\n      contractName: \"Joe Biden\",\n      contractLabel: \"Latest Price\",\n      contractPrice: \"0.01\",\n      priceChange: \"0.02\"\n    }, {\n      avatar: require(\"../../images/BernieAvatar.png\"),\n      contractName: \"Bernie Sanders\",\n      contractLabel: \"Latest Price\",\n      contractPrice: \"0.01\",\n      priceChange: \"0.02\"\n    }, {\n      avatar: require(\"../../images/ButtigeigAvatar.png\"),\n      contractName: \"Pete Buttigeig\",\n      contractLabel: \"Latest Price\",\n      contractPrice: \"0.01\",\n      priceChange: \"0.00\"\n    }, {\n      avatar: require(\"../../images/WarrenAvatar.png\"),\n      contractName: \"Elizabeth Warren\",\n      contractLabel: \"Latest Price\",\n      contractPrice: \"0.01\",\n      priceChange: \"0.02\"\n    }];\n    const namesPrices = [{\n      contractPrice: this.state.cPrice,\n      priceChange: this.state.pChange\n    }];\n    return React.createElement(\"div\", {\n      className: \"parent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557\n      },\n      __self: this\n    }), React.createElement(SlideToggle, {\n      duration: 300,\n      collapsed: true,\n      render: ({\n        toggle,\n        progress,\n        setCollapsibleElement,\n        range\n      }) => React.createElement(\"div\", {\n        className: toggle ? 'LiveMarketBox' : 'LiveMarketBoxActive',\n        onClick: toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"LiveMarkets\",\n        onClick: this.props.theToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573\n        },\n        __self: this\n      }, this.props.relevantMarkets.contractName), React.createElement(SlideToggle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"slide-toggle__box\",\n        ref: setCollapsibleElement,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578\n        },\n        __self: this\n      }, this.contractDataCall(), React.createElement(MarketBlurb, {\n        blurb: \"PredictIt\\u2019s Live Market Data based on upcoming future events. These are the markets most closely associated with key events. Find market details,\",\n        blurbLink: \" here.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581\n        },\n        __self: this\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default LiveMarkets;","map":{"version":3,"sources":["/Users/cam/real_money_polls/src/components/LiveMarkets/LiveMarkets.js"],"names":["React","SlideToggle","LiveContracts","MarketBlurb","axios","LiveMarkets","Component","constructor","props","toggleActive","setState","active","state","contracts","contractNames","mId1","contractIds","contractPrices","activeArray","cPrice","pChange","cName","cAvatar","cData","componentDidMount","get","mId1Title","then","res","data","componentDidUpdate","console","log","map","contract","index","push","contract_id","name","createContracts","image","namesPrices","contractDataCall","values","lastTrade","last_trade_price","lastClose","last_close_price","priceDiff","toFixed","render","activeContracts","avatar","require","contractName","contractLabel","contractPrice","priceChange","toggle","progress","setCollapsibleElement","range","theToggle","relevantMarkets"],"mappings":"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","sourcesContent":["/* \n\n <LiveContracts \n        avatar={require('../../images/BidenAvatar.png')}\n        contractName=\"Joe Biden\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.14\"\n        priceChange=\"0.2\" \n        />\n         <LiveContracts \n        avatar={require('../../images/BernieAvatar.png')}\n        contractName=\"Bernie Sanders\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.06\"\n        priceChange=\"0.3\" \n        />\n         <LiveContracts \n        avatar={require('../../images/ButtigeigAvatar.png')}\n        contractName=\"Pete Buttigeig\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.05\"\n        priceChange=\"0.1\" \n        />\n         <LiveContracts \n        avatar={require('../../images/WarrenAvatar.png')}\n        contractName=\"Elizabeth Warren\"\n        contractLabel=\"Latest Price\"\n        contractPrice=\"0.03\"\n        priceChange=\"0.1\" \n        />\n\n\n\n\n*/\n\nimport React from 'react';\nimport './LiveMarkets.scss';\nimport SlideToggle from 'react-slide-toggle';\nimport LiveContracts from '../LiveContracts/LiveContracts'\nimport MarketBlurb from '../MarketBlurb/MarketBlurb'\nimport axios from 'axios';\n\n\nclass LiveMarkets extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state={\n        active: false,\n        contracts: [],\n        contractNames: [],\n        mId1: '2721',\n        contractIds: [],\n        contractPrices: [],\n        activeArray: [],\n        cPrice: \"\",\n        pChange: \"\",\n        cName: \"\", \n        cAvatar: \"\", \n        cData: [],\n\n\n    }\n\n  \n  }\n\n\n  async componentDidMount() {\n      //Get contracts\n   axios.get('http://localhost:3002/api/contract/contract_list/'+ this.props.mId1Title).then(res => { \n        this.setState({ contracts: res.data[0] });\n       \n}\n   );\n\n}\n\n\n\ncomponentDidUpdate() {\n    console.log('this.state.contracts', this.state.contracts)\n\n    const contracts = this.state.contracts\n        contracts.map((contract, index) => {\n            this.state.contractIds.push(contract.contract_id)\n            const contractIds = this.state.contractIds \n            this.state.contractNames.push(contract.name)\n            const contractNames = this.state.contractNames\n\n}\n)};\n\n\n\n\n\n\n\n\n\n\n\n\n/* \n\n\ncomponentWillUpdate() {\n\n    const names = this.state.contractNames\n    names.map((name, index) res => {\n    const contract = contract.name\n\n    })\n\n    const contracts = this.state.contracts\n    contracts.map((contract, index) res => {\n    const name = contract.name\n    const avatar = contract.image\n    \n    })\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\ncomponentWillUpdate() {\n    const contractIds = this.state.contractIds \n    const contractNames = this.state.contractNames\n    console.log('contractIds', contractIds)\n    console.log('contractNames', contractNames)\n\n\n\n    contractIds.map(( contractId, index) => {\n        axios.get('http://localhost:3002/api/value/value_list/' + contractId[index]).then(res =>{\n                            \n                            // Put contract values into array in state\n                            this.setState({ contractPrices: res.data[0]})\n                            // make some variables to easily move data around\n                            const values = this.state.contractPrices\n                            const lastTrade = values.last_trade_price\n                            const lastClose = values.last_close_price\n                            const priceDiff = (lastClose - lastTrade).toFixed(2)\n                            // save prices in state\n                            const cPrice = lastTrade;\n                            this.setState({ cPrice: cPrice})\n                            const pChange = priceDiff;\n                            this.setState({ pChange: pChange})\n                            console.log('this.state.cPrice', this.state.cPrice)\n                            console.log('this.state.pChange', this.state.pChange)\n                            console.log('this.state.contractPrices', this.state.contractPrices)\n            \n                        \n            \n                            \n                        })\n                        // end of prices call\n    })\n\n    \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Loop thru all the contracts\n        const contracts = this.state.contracts\n        contracts.map((contract, index) => {\n            this.state.contractIds.push(contract.contract_id)\n            // put name and avatar in state \n            this.setState({ cName: contract.name})\n            this.setState({ cAvatar: contract.image})\n            const contractIds = this.state.contractIds \n            // Need Contract Ids\n            // For each contract (data), Push the contract_id into contractIds array\n\n           \n               \n            \n            \n            \n            \n               \n           \n\n\n            \n        \n          \n\n            // Push both the current contract's name, avatar, into an array with the two values assoc w/ contract_id\n               const dataObj = {'avatar': this.state.cAvatar, 'name': this.state.cName, 'price': this.state.cPrice, 'change': this.state.pChange}\n               this.state.cData.push(dataObj)\n               console.log('this.state.cData', this.state.cData);\n\n               this.setState({ cPrice: \"\"})\n               this.setState({ pChange: \"\"})\n               this.setState({ cName: \"\"})\n               this.setState({ cAvatar: \"\"})\n\n               console.log('this.state.cPrice', this.state.cPrice)\n               console.log('this.state.pChange', this.state.pChange)\n\n               console.log('this.state.cName', this.state.cName)\n               console.log('this.state.cAvatar', this.state.cAvatar)\n               console.log('this.state.contracts', this.state.contracts)\n\n            })\n\n\n        \n    }); \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\naxios.get('http://localhost:3002/api/value/value_list/' + contractIds[index]).then(res =>{\n                            \n                            // Put contract values into array in state\n                            this.setState({ contractPrices: res.data[0]})\n                            // make some variables to easily move data around\n                            const values = this.state.contractPrices\n                            const lastTrade = values.last_trade_price\n                            const lastClose = values.last_close_price\n                            const priceDiff = (lastClose - lastTrade).toFixed(2)\n                            // save prices in state\n                            const cPrice = lastTrade;\n                            this.setState({ cPrice: cPrice})\n                            const pChange = priceDiff;\n                            this.setState({ pChange: pChange})\n                            console.log('this.state.cPrice', this.state.cPrice)\n                            console.log('this.state.pChange', this.state.pChange)\n                            console.log('this.state.contractPrices', this.state.contractPrices)\n            \n                        \n            \n                            \n                        })\n                        // end of prices call\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\naxios.get('http://localhost:3002/api/value/value_list/' + contractIds[index]).then(res =>{\n                \n                // Put contract values into array in state\n                this.setState({ contractPrices: res.data[0]})\n                // make some variables to easily move data around\n                const values = this.state.contractPrices\n                const lastTrade = values.last_trade_price\n                const lastClose = values.last_close_price\n                const priceDiff = (lastClose - lastTrade).toFixed(2)\n                const priceSwap = (lastClose - lastTrade).toFixed(2)\n                // save prices in state\n                const cPrice = lastTrade;\n                this.setState({ cPrice: cPrice})\n                const pChange = priceDiff;\n                this.setState({ pChange: pChange})\n                console.log('this.state.cPrice', this.state.cPrice)\n                console.log('this.state.pChange', this.state.pChange)\n                console.log('this.state.contractPrices', this.state.contractPrices)\n\n            \n\n                \n            })\n            // end of prices call\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        console.log('response', res.data);\n        this.setState({ data: res.data[0] });\n        \n        // Loop thru all the contracts\n        const datas = this.state.data\n        datas.map((data, index) => {\n        \n\n        //Get the values\n        const theValues = \n        // Get the Ids\n        // For each contract (data), Push the contract_id into contractIds array\n        this.state.contractIds.push(data.contract_id)\n\n        console.log('contractIds', this.state.contractIds)\n        console.log('this.state.data', this.state.data);\n        \n        // Get the contract name and image\n        const cName = data.name;\n        const cAvatar = data.image;\n\n        this.state.nameD.push(cName)\n        this.state.avatarD.push(cAvatar)\n\n    \n      \n        console.log('cData Array', this.state.cData)\n       \n       \n        \n        \n        \n        const ids = this.state.contractIds\n        axios.get('http://localhost:3002/api/value/value_list/' + ids[index])\n        .then(res => {\n            this.setState({ contractPrices: res.data[0]})\n            \n            this.afunction()\n            console.log('this.state.activeArray', this.state.activeArray);\n            return console.log('contract prices', this.state.contractPrices) \n        });\n\n        // end of Contracts Loop\n        })\n        //console.log('this.state.data', this.state.data)\n\n\n*/\n\n    \n  \n\n  toggleActive = () => {\n\n      this.setState({ active: !this.state.active })\n  }\n\n\n  async createContracts(){\n     \n    this.state.contracts.map((contract, index) => {\n\n\n\n        //console.log('this the index', index)\n        return <LiveContracts\n        key={index} \n        contractName={contract.name}\n        contractAvatar={contract.image}\n        namesPrices={this.namesPrices}\n        \n        \n       \n        />\n        \n        })\n\n  }\n\n\n  async contractDataCall() {\n  await axios.get('http://localhost:3002/api/value/value_list/' + this.state.contractIds).then(res =>{\n                \n        // Put contract values into array in state\n        this.setState({ contractPrices: res.data[0]})\n        // make some variables to easily move data around\n        const values = this.state.contractPrices\n        const lastTrade = values.last_trade_price\n        const lastClose = values.last_close_price\n        const priceDiff = (lastClose - lastTrade).toFixed(2)\n\n        // save prices in state\n        const cPrice = lastTrade;\n        this.setState({ cPrice: cPrice})\n        const pChange = priceDiff;\n        this.setState({ pChange: pChange})\n        console.log('this.state.cPrice', this.state.cPrice)\n        console.log('this.state.pChange', this.state.pChange)\n        console.log('this.state.contractPrices', this.state.contractPrices)\n\n\n\n        this.createContracts(); \n\n    \n\n        \n    })\n    // end of prices call\n  }\n\n \n\n\nrender() {\n\n    const activeContracts = [\n        {\n            avatar: require(\"../../images/KamalaAvatar.png\"),\n            contractName: \"Kamala Harris\",\n            contractLabel: \"Latest Price\",\n            contractPrice: \"0.84\",\n            priceChange: \"0.02\"\n        },\n        {\n            avatar: require(\"../../images/BidenAvatar.png\"),\n            contractName: \"Joe Biden\",\n            contractLabel: \"Latest Price\",\n            contractPrice: \"0.01\",\n            priceChange: \"0.02\"\n        },\n        {\n            avatar: require(\"../../images/BernieAvatar.png\"),\n            contractName: \"Bernie Sanders\",\n            contractLabel: \"Latest Price\",\n            contractPrice: \"0.01\",\n            priceChange: \"0.02\"\n        },\n        {\n            avatar: require(\"../../images/ButtigeigAvatar.png\"),\n            contractName: \"Pete Buttigeig\",\n            contractLabel: \"Latest Price\",\n            contractPrice: \"0.01\",\n            priceChange: \"0.00\"\n        },\n        {\n            avatar: require(\"../../images/WarrenAvatar.png\"),\n            contractName: \"Elizabeth Warren\",\n            contractLabel: \"Latest Price\",\n            contractPrice: \"0.01\",\n            priceChange: \"0.02\"\n        },\n\n    ]\n\n\n\n\n    const namesPrices = [\n        {\n\n            contractPrice: this.state.cPrice,\n            priceChange: this.state.pChange\n        }\n\n    ]\n\n\n\n  return (\n         <div className=\"parent\">\n             <div className=\"one\">\n                 \n             </div>\n\n    <SlideToggle\n    duration={300}\n    collapsed\n    render={({\n      toggle,\n      progress,\n      setCollapsibleElement,\n      range,\n    }) => (\n\n        <div className={ toggle ? 'LiveMarketBox' : 'LiveMarketBoxActive'} onClick={toggle }>\n        \n        <div className=\"LiveMarkets\"  onClick={this.props.theToggle}>\n        {this.props.relevantMarkets.contractName}\n    \n          </div>\n          <SlideToggle>\n              <div className=\"slide-toggle__box\" ref={setCollapsibleElement}>\n              {this.contractDataCall()} \n\n            <MarketBlurb \n            blurb=\"PredictIt’s Live Market Data based on upcoming future events. These are the markets most closely associated with key events. Find market details,\"\n            blurbLink=\" here.\"\n            \n            />\n        \n        </div>\n       \n        </SlideToggle>\n\n       \n        \n\n   \n\n\n      \n      </div>\n      )}\n    \n      />\n      </div>\n  );\n }\n}\nexport default LiveMarkets;"]},"metadata":{},"sourceType":"module"}