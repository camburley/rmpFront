{"ast":null,"code":"var _jsxFileName = \"/Users/cam/real_money_polls/src/components/LiveMarkets/LiveMarkets.js\";\nimport React from 'react';\nimport './LiveMarkets.scss';\nimport SlideToggle from 'react-slide-toggle';\nimport LiveContracts from '../LiveContracts/LiveContracts';\nimport MarketBlurb from '../MarketBlurb/MarketBlurb';\nimport axios from 'axios';\nimport { objectTypeSpreadProperty, nullLiteral, breakStatement } from '@babel/types';\n\nclass LiveMarkets extends React.Component {\n  constructor(props) {\n    super(props);\n    this.globalContracts = [];\n    this.globalContractIds = [];\n    this.globalNames = [];\n    this.globalArray = [];\n    this.bigObj = [];\n    this.globalNamesLength = \"\";\n    this.putIndex = [];\n    this.market_ids = [];\n    this.marketIds = [];\n    this.largestObj = [];\n    this.unique_array = [];\n    this.state = {\n      active: false,\n      contracts: [],\n      contractNames: [],\n      contractIds: [],\n      contractPrices: [],\n      globalNames: [],\n      globalPrices: [],\n      unique_array: []\n    };\n    this.createContracts = this.createContracts.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  getContractPrices() {\n    // check contractIds array -- see if they're all there\n    console.log('this.globalContractIds -- BEFORE valuesLoop() begins...', this.globalContractIds);\n    console.log('this.globalArray -- BEFORE valuesLoop() begins...', this.globalArray); // checked!\n\n    const idsArray = this.globalContractIds;\n    console.log('idsArray TIP TOP of getContractPrices', idsArray);\n    this.values = idsArray.forEach((array, index) => {\n      //console.log('array', array)\n      axios.get('http://localhost:3002/api/value/value_list/' + array).then(res => {\n        let priceGroupings = {\n          \"contract_id\": array,\n          \"contractPrice\": res.data[0][0].best_buy_yes_offer,\n          \"contractChange\": (res.data[0][0].last_trade_price - res.data[0][0].last_close_price).toFixed(2)\n        };\n        this.globalArray.push(priceGroupings);\n      }); // end of prices call\n    });\n  }\n\n  async componentDidMount() {\n    this.marketIds.push(this.props.mId1Title);\n    console.log('this.marketIds', this.marketIds);\n    this.marketIds.map((Id, index) => {\n      //Get contracts\n      axios.get('http://localhost:3002/api/contract/contract_list/' + Id).then(res => {\n        // this.setState({ contracts: res.data[0] });\n        console.log('res.data[0] NO IDs in Global Contracts', res.data[0]);\n        this.globalContracts.push(res.data[0]);\n        const contracts = this.globalContracts;\n        console.log('contracts[0] how many b4 i run this loop?', contracts[0]);\n        contracts[0].map((contract, index) => {\n          console.log('this.globalContracts[0] BEFORE ADDING TO ARRAY', this.globalContracts[0]);\n          console.log('this.globalContractIds BEFORE ADDING TO ARRAY', this.globalContractIds);\n          this.globalContractIds.push(contract.contract_id);\n          const namesUrls = {\n            \"marketId\": Id,\n            \"name\": contract.name,\n            \"url\": contract.image,\n            \"id\": contract.contract_id\n          };\n          this.globalNames.push(namesUrls);\n          this.globalNamesLength = this.globalNames.length;\n        });\n        console.log('this.globalNames in componentDidMount()', this.globalNames);\n        return;\n      } // something end of call \n      );\n    });\n  }\n\n  createContracts() {\n    //setTimeout(5500)\n    console.log('this.globalContracts[0]', this.globalContracts[0]);\n    console.log('this.globalContracts[0]', this.globalContracts[0]);\n    this.globalNames.map((row, index) => {\n      console.log('row.contract_id', row.id);\n      console.log('this.globalContracts', this.globalContracts);\n      this.globalArray.map((line, k) => {\n        if (row.id === line.contract_id) {\n          if (row) {\n            console.log('row.id INSIDE SECOND -- PRICES LOOP', row.id);\n            console.log('line.contract_id INSIDE SECOND -- PRICES LOOP', line.contract_id);\n            const jointObj = {\n              \"name\": row.name,\n              \"url\": row.url,\n              \"contractPrice\": line.contractPrice,\n              \"contractChange\": line.contractChange,\n              \"contract_id\": line.contract_id,\n              \"id\": row.id,\n              \"repeat\": 0\n            };\n            const jointOne = {\n              \"name\": row.name,\n              \"url\": row.url,\n              \"contractPrice\": line.contractPrice,\n              \"contractChange\": line.contractChange,\n              \"contract_id\": line.contract_id,\n              \"id\": row.id,\n              \"repeat\": 1\n            };\n            /* \n            \n            this.bigObj.map((big, d) => {\n                if (big.id === jointObj.id){\n                    console.log('we already got it', big)\n                    this.largestObj.push(big);\n                    console.log('jointOne', jointOne)\n                    console.log('this.bigObj jointOne', this.bigObj)\n                }\n             }) \n            \n            */\n\n            console.log('this.jointObj', jointObj);\n            this.bigObj.push(jointObj);\n            console.log('this.bigObj', this.bigObj);\n          } else {\n            breakStatement();\n          }\n        } else {//do nothing\n        }\n      });\n    });\n\n    function removeDuplicates(bigObj) {\n      let unique_array = [];\n\n      for (let i = 0; i < bigObj.length; i++) {\n        if (unique_array.indexOf(bigObj[i].id && bigObj[i].name) === -1) {\n          //unique_array.push(\"id\" + arr[i].id)\n          //unique_array.push(\"name\" + arr[i].name)\n          //unique_array.push(\"contractPrice\" + arr[i].contractPrice)\n          //unique_array.push(\"contractChange\" + arr[i].contractChange)\n          unique_array.push(bigObj[i].name);\n          unique_array.push({\n            \"id\": bigObj[i].id,\n            \"contract_id\": bigObj[i].contract_id,\n            \"name\": bigObj[i].name,\n            \"url\": bigObj[i].url,\n            \"contractPrice\": bigObj[i].contractPrice,\n            \"contractChange\": bigObj[i].contractChange\n          });\n        }\n      }\n\n      return unique_array;\n    }\n\n    console.log('removeDuplicates(this.bigObj)', removeDuplicates(this.bigObj));\n    console.log('this.unique_array', this.unique_array);\n    this.unique_array.push(removeDuplicates(this.bigObj));\n    console.log('this.unique_array HERE???????', this.unique_array);\n    /*\n    \n    \n    \n    function removeDuplicates(arr){\n        let unique_array = []\n        for(let i = 0;i < arr.length; i++){\n            if(unique_array.indexOf(arr[i].id) === -1 && unique_array.indexOf(arr[i].contract_id) === -1 && unique_array.indexOf(arr[i].name) === -1 && unique_array.indexOf(arr[i].contractPrice) === -1 && unique_array.indexOf(arr[i].contractChange) === -1 && unique_array.indexOf(arr[i].url) === -1){\n                console.log('arr[i].name', arr[i].name )\n                console.log('arr[i].url', arr[i].url )\n                console.log('arr[i].contractPrices', arr[i].contractPrice )\n                console.log('arr[i].contractChange', arr[i].contractChange )\n                console.log('arr[i].contract_id', arr[i].contract_id )\n                console.log('arr[i].id', arr[i].id )\n                //this.bigObj = [];\n                const scrubbedData = {\"name\" : arr[i].name , \"url\" : arr[i].url ,  \"contractPrices\" : arr[i].contractPrice , \"contractChange\" : arr[i].contractChange, \"contract_id\" : arr[i].contract_id , \"id\" : arr[i].id}\n                const scrubby = [arr[i].name && arr[i].name];\n                console.log('scrubbedData', scrubbedData)\n                //this.bigObj.push(scrubbedData)\n                unique_array.push(scrubbedData)\n                \n                console.log('unique_array', unique_array)\n               \n            }\n        }\n        return unique_array\n    }\n    \n    console.log('removeDuplicates(this.bigObj)', removeDuplicates(this.bigObj)); \n    \n    \n    \n    \n    \n    this.globalArray.map((line, k) => {\n                    if ( index === k) {\n                console.log('row.id INSIDE', row.contract_id)      \n                console.log('line.id INSIDE', line.id)\n                console.log('k', k)\n                console.log('index', index)\n               \n               \n              \n                \n    \n                const jointObj = {\"name\": row.name, \"url\": row.url, \"contractPrice\": line.contractPrice, \"contractChange\": line.contractChange, \"contract_id\": line.contract_id, \"id\": row.id, \"repeat\": 0}\n                console.log('this.jointObj', jointObj)\n                this.bigObj.push(jointObj);\n                \n                console.log('this.bogObj', this.bigObj);\n               \n            } else {\n                breakStatement();\n            }\n             \n        })\n    \n    \n    \n    */\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"parent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"one\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }), React.createElement(SlideToggle, {\n      duration: 300,\n      collapsed: true,\n      render: ({\n        toggle,\n        progress,\n        setCollapsibleElement,\n        range\n      }) => React.createElement(\"div\", {\n        className: toggle ? 'LiveMarketBox' : 'LiveMarketBoxActive',\n        onClick: toggle,\n        onChange: this.getContractPrices(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"LiveMarkets\",\n        onClick: this.createContracts(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, this.props.contractName), React.createElement(SlideToggle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"slide-toggle__box\",\n        ref: setCollapsibleElement,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, this.unique_array.map((obj, index) => {\n        if (obj[5]) {\n          console.log('obj[index]', obj[index]);\n          console.log('obj', obj);\n          console.log('obj[0]', obj[0]);\n          console.log('obj[1]', obj[1]);\n          console.log('obj[2]', obj[2]);\n          console.log('obj[3]', obj[3]);\n          console.log('obj[4]', obj[4]);\n          console.log('obj[5]', obj[5]);\n          console.log('obj[6]', obj[6]);\n          console.log('obj[7]', obj[7]);\n          console.log('obj[index].name', obj[index].name);\n          console.log('obj[0].name', obj[0].name);\n          console.log('obj[1].name', obj[1].name);\n          const name = obj.name;\n          const url = obj.url;\n          const price = obj.contractPrice;\n          const change = obj.contractChange;\n          return React.createElement(LiveContracts, {\n            key: index,\n            contractName: name,\n            contractAvatar: url,\n            contractPrice: price,\n            contractChange: change,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 358\n            },\n            __self: this\n          });\n        }\n      }), React.createElement(MarketBlurb, {\n        blurb: \"PredictIt\\u2019s Live Market Data based on upcoming future events. These are the markets most closely associated with key events. Find market details,\",\n        blurbLink: \" here.\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      })))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default LiveMarkets;","map":{"version":3,"sources":["/Users/cam/real_money_polls/src/components/LiveMarkets/LiveMarkets.js"],"names":["React","SlideToggle","LiveContracts","MarketBlurb","axios","objectTypeSpreadProperty","nullLiteral","breakStatement","LiveMarkets","Component","constructor","props","globalContracts","globalContractIds","globalNames","globalArray","bigObj","globalNamesLength","putIndex","market_ids","marketIds","largestObj","unique_array","state","active","contracts","contractNames","contractIds","contractPrices","globalPrices","createContracts","bind","componentDidMount","getContractPrices","console","log","idsArray","values","forEach","array","index","get","then","res","priceGroupings","data","best_buy_yes_offer","last_trade_price","last_close_price","toFixed","push","mId1Title","map","Id","contract","contract_id","namesUrls","name","image","length","row","id","line","k","jointObj","url","contractPrice","contractChange","jointOne","removeDuplicates","i","indexOf","render","toggle","progress","setCollapsibleElement","range","contractName","obj","price","change"],"mappings":"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","sourcesContent":["\n\nimport React from 'react';\nimport './LiveMarkets.scss';\nimport SlideToggle from 'react-slide-toggle';\nimport LiveContracts from '../LiveContracts/LiveContracts'\nimport MarketBlurb from '../MarketBlurb/MarketBlurb'\nimport axios from 'axios';\nimport { objectTypeSpreadProperty, nullLiteral, breakStatement } from '@babel/types';\n\n\nclass LiveMarkets extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state={\n        active: false,\n        contracts: [],\n        contractNames: [],\n        contractIds: [],\n        contractPrices: [],\n        globalNames: [],\n        globalPrices: [],\n        unique_array: [],\n      \n\n\n    };\n\n    this.createContracts = this.createContracts.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n\n  \n  }\n\n  globalContracts = [];\n  globalContractIds = [];\n  globalNames = [];\n  globalArray = [];\n  bigObj= [];\n  globalNamesLength = \"\" \n  putIndex = [];\n  market_ids = [];\n  marketIds = [];\n  largestObj = [];\n  unique_array = []\n\n\n  getContractPrices(){\n    // check contractIds array -- see if they're all there\n    console.log('this.globalContractIds -- BEFORE valuesLoop() begins...', this.globalContractIds);\n    console.log('this.globalArray -- BEFORE valuesLoop() begins...', this.globalArray);\n    // checked!\n\n    const idsArray = this.globalContractIds\n    console.log('idsArray TIP TOP of getContractPrices', idsArray)\n    this.values = idsArray.forEach((array, index) => {\n       \n\n        //console.log('array', array)\n       \n        axios.get('http://localhost:3002/api/value/value_list/' + array).then(res =>{\n\n        let priceGroupings = {\"contract_id\": array, \"contractPrice\": res.data[0][0].best_buy_yes_offer, \"contractChange\": (res.data[0][0].last_trade_price - res.data[0][0].last_close_price).toFixed(2)}\n        this.globalArray.push(priceGroupings)\n        \n    \n        \n     \n\n    \n        \n    \n    }) \n    // end of prices call\n  \n    });\n    }\n\n  \n\n   async componentDidMount() {\n    \n   \n    \n    this.marketIds.push(this.props.mId1Title)\n    console.log('this.marketIds', this.marketIds)\n\n    this.marketIds.map((Id, index)=>{\n\n           //Get contracts\n   axios.get('http://localhost:3002/api/contract/contract_list/'+ Id).then(res => { \n    // this.setState({ contracts: res.data[0] });\n    console.log('res.data[0] NO IDs in Global Contracts', res.data[0])\n    this.globalContracts.push(res.data[0])\n    const contracts = this.globalContracts\n    console.log('contracts[0] how many b4 i run this loop?', contracts[0])\n\n    contracts[0].map((contract, index) => {\n        \n        console.log('this.globalContracts[0] BEFORE ADDING TO ARRAY', this.globalContracts[0])\n        console.log('this.globalContractIds BEFORE ADDING TO ARRAY', this.globalContractIds)\n         this.globalContractIds.push(contract.contract_id)\n         const namesUrls = {\"marketId\": Id,\"name\": contract.name, \"url\": contract.image, \"id\": contract.contract_id }\n         this.globalNames.push(namesUrls)\n         this.globalNamesLength = this.globalNames.length\n\n        \n    }\n    )\n    console.log('this.globalNames in componentDidMount()', this.globalNames)\n    return ;\n    \n}\n\n// something end of call \n\n);\n        \n    })\n\n\n    }\n\n\n\n\n\n  createContracts() {\n\n   //setTimeout(5500)\n  \n  console.log('this.globalContracts[0]', this.globalContracts[0])\n  console.log('this.globalContracts[0]', this.globalContracts[0])\n \n    this.globalNames.map((row, index)=>{\n        console.log('row.contract_id', row.id)\n        console.log('this.globalContracts', this.globalContracts)\n\n\n\n        this.globalArray.map((line, k) => {\n            if ( row.id === line.contract_id) {\n                if(row ){\n        console.log('row.id INSIDE SECOND -- PRICES LOOP', row.id)      \n        console.log('line.contract_id INSIDE SECOND -- PRICES LOOP', line.contract_id)\n        \n      \n        const jointObj = {\"name\": row.name, \"url\": row.url, \"contractPrice\": line.contractPrice, \"contractChange\": line.contractChange, \"contract_id\": line.contract_id, \"id\": row.id, \"repeat\": 0}\n        const jointOne = {\"name\": row.name, \"url\": row.url, \"contractPrice\": line.contractPrice, \"contractChange\": line.contractChange, \"contract_id\": line.contract_id, \"id\": row.id, \"repeat\": 1}\n       \n        /* \n        \n        this.bigObj.map((big, d) => {\n            if (big.id === jointObj.id){\n                console.log('we already got it', big)\n                this.largestObj.push(big);\n                console.log('jointOne', jointOne)\n                console.log('this.bigObj jointOne', this.bigObj)\n            }\n\n        }) \n        \n        */\n        \n        console.log('this.jointObj', jointObj)\n\n        this.bigObj.push(jointObj);\n        \n        console.log('this.bigObj', this.bigObj);\n       \n       \n    } else {\n        breakStatement();\n    }\n} else {\n    //do nothing\n}\n})\n     \n    \n})\n\n\n\n\n\n\n\nfunction removeDuplicates(bigObj){\n    let unique_array = []\n    for(let i = 0;i < bigObj.length; i++){\n        if(unique_array.indexOf(bigObj[i].id && bigObj[i].name) === -1){\n            //unique_array.push(\"id\" + arr[i].id)\n            //unique_array.push(\"name\" + arr[i].name)\n            //unique_array.push(\"contractPrice\" + arr[i].contractPrice)\n            //unique_array.push(\"contractChange\" + arr[i].contractChange)\n            unique_array.push(bigObj[i].name)\n            unique_array.push({\n                \"id\": bigObj[i].id,\n                \"contract_id\": bigObj[i].contract_id,\n                \"name\": bigObj[i].name,\n                \"url\": bigObj[i].url,\n                \"contractPrice\": bigObj[i].contractPrice,\n                \"contractChange\": bigObj[i].contractChange\n            });\n            \n\n           \n        }\n\n    }\n    return unique_array\n}\n\n\nconsole.log('removeDuplicates(this.bigObj)', removeDuplicates(this.bigObj));\nconsole.log('this.unique_array', this.unique_array);\nthis.unique_array.push(removeDuplicates(this.bigObj))\nconsole.log('this.unique_array HERE???????', this.unique_array);\n\n\n\n\n\n\n\n/*\n\n\n\nfunction removeDuplicates(arr){\n    let unique_array = []\n    for(let i = 0;i < arr.length; i++){\n        if(unique_array.indexOf(arr[i].id) === -1 && unique_array.indexOf(arr[i].contract_id) === -1 && unique_array.indexOf(arr[i].name) === -1 && unique_array.indexOf(arr[i].contractPrice) === -1 && unique_array.indexOf(arr[i].contractChange) === -1 && unique_array.indexOf(arr[i].url) === -1){\n            console.log('arr[i].name', arr[i].name )\n            console.log('arr[i].url', arr[i].url )\n            console.log('arr[i].contractPrices', arr[i].contractPrice )\n            console.log('arr[i].contractChange', arr[i].contractChange )\n            console.log('arr[i].contract_id', arr[i].contract_id )\n            console.log('arr[i].id', arr[i].id )\n            //this.bigObj = [];\n            const scrubbedData = {\"name\" : arr[i].name , \"url\" : arr[i].url ,  \"contractPrices\" : arr[i].contractPrice , \"contractChange\" : arr[i].contractChange, \"contract_id\" : arr[i].contract_id , \"id\" : arr[i].id}\n            const scrubby = [arr[i].name && arr[i].name];\n            console.log('scrubbedData', scrubbedData)\n            //this.bigObj.push(scrubbedData)\n            unique_array.push(scrubbedData)\n            \n            console.log('unique_array', unique_array)\n           \n        }\n    }\n    return unique_array\n}\n\nconsole.log('removeDuplicates(this.bigObj)', removeDuplicates(this.bigObj)); \n\n\n\n\n\nthis.globalArray.map((line, k) => {\n                if ( index === k) {\n            console.log('row.id INSIDE', row.contract_id)      \n            console.log('line.id INSIDE', line.id)\n            console.log('k', k)\n            console.log('index', index)\n           \n           \n          \n            \n\n            const jointObj = {\"name\": row.name, \"url\": row.url, \"contractPrice\": line.contractPrice, \"contractChange\": line.contractChange, \"contract_id\": line.contract_id, \"id\": row.id, \"repeat\": 0}\n            console.log('this.jointObj', jointObj)\n            this.bigObj.push(jointObj);\n            \n            console.log('this.bogObj', this.bigObj);\n           \n        } else {\n            breakStatement();\n        }\n         \n    })\n\n\n\n*/\n\n\n    \n\n    \n \n\n}\n\n\n\n\nrender() {\n\n \n  return (\n         <div className=\"parent\">\n             <div className=\"one\">\n                 \n             </div>\n\n    <SlideToggle\n    duration={300}\n    collapsed\n    render={({\n      toggle,\n      progress,\n      setCollapsibleElement,\n      range,\n    }) => (\n\n        <div className={ toggle ? 'LiveMarketBox' : 'LiveMarketBoxActive'} onClick={toggle} onChange={this.getContractPrices()} >\n        \n        <div className=\"LiveMarkets\"  onClick={this.createContracts()}  >\n        {this.props.contractName}\n    \n          </div>\n          <SlideToggle >\n              <div className=\"slide-toggle__box\" ref={setCollapsibleElement}>\n                  \n               \n               {\n               \n               this.unique_array.map((obj, index) => {\n                \n                \n                \n                if (obj[5]) {\n                \n                console.log('obj[index]', obj[index])\n                console.log('obj', obj)\n                console.log('obj[0]', obj[0])\n                console.log('obj[1]', obj[1])\n                console.log('obj[2]', obj[2])\n                console.log('obj[3]', obj[3])\n                console.log('obj[4]', obj[4])\n                console.log('obj[5]', obj[5])\n                console.log('obj[6]', obj[6])\n                console.log('obj[7]', obj[7])\n                console.log('obj[index].name', obj[index].name)\n                console.log('obj[0].name', obj[0].name)\n                console.log('obj[1].name', obj[1].name)\n\n                const name = obj.name;\n                const url = obj.url;\n                const price = obj.contractPrice;\n                const change = obj.contractChange;\n               \n                return (\n                     \n                            <LiveContracts\n                            key={index}\n                            contractName={name}\n                            contractAvatar={url}\n                            contractPrice={price}\n                            contractChange={change}\n                            \n                         \n                            />\n                )\n            }\n\n    })\n               }\n\n              \n\n            <MarketBlurb \n            blurb=\"PredictIt’s Live Market Data based on upcoming future events. These are the markets most closely associated with key events. Find market details,\"\n            blurbLink=\" here.\"\n            \n            />\n        \n        </div>\n       \n        </SlideToggle>\n\n       \n        \n\n   \n\n\n      \n      </div>\n      )}\n    \n      />\n      </div>\n  );\n }\n}\nexport default LiveMarkets;"]},"metadata":{},"sourceType":"module"}